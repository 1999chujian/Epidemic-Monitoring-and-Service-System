# 志愿采购模块需求分析报告

### 目的

​		**志愿采购模块的目的是为了解决在疫情当下封闭的小区住户难以出户购买生活必需品乃至药品的困境，并同时避免多个小区间发生疫情蔓延的风险。**

​		新冠肺炎疫情当前，为了响应党和国家关于减少人员流动，降低疫情传播风险的要求和号召，各级地方采取了一系列强有力的管控措施，绝大部分小区进行了封闭式管理，小区住户出入小区有明确的次数限制，并需要进行登记，甚至出现了确诊或者疑似病例所在的楼栋全部封闭的情况。这无疑给小区住户带来了生活上的麻烦和困难，食品和日常生活用品的缺乏以及急需物品的难以获得成为了疫情防控中亟需解决的问题。
​		疫情监控系统中的志愿服务模块就是基于当前广大人民日常生活的困境，为了解决这一棘手问题而构思产生的。志愿服务模块以“服务小区住户，解决日常生活困难”为根本目的，立足于受到疫情防控而生活受阻的小区住户的当前需求，以志愿服务为手段，希望能够方便市民，尽最大努力将疫情对于日常生活的影响降低到最低程度。本模块采用小区和志愿者“一对多”模式，能够进一步减小交叉感染的风险，以及志愿者暴露在外界环境中被感染的风险，在志愿服务中达到安全的标准。

​		综上所述，志愿服务模块致力于实现一个宏观统筹的平台，其上商家、志愿者、小区管理方三方联动，以志愿者为桥梁和纽带，将小区住户的日常生活需求和商家现有的商品进行对接，同时解决了商家的商品滞销这一困难。

### 需要实现的功能

#### 功能需求分析（前端）

##### 小区住户端

* **功能陈列**

| 序号 | 功能                           | 需求关联性        |
| ---- | ------------------------------ | ----------------- |
| 1    | 注册页面                       | 自动跳转到 2      |
| 2    | 登陆页面                       | 按需跳转到1/3/5/7 |
| 3    | 商品（日用品/药品/其它）陈列区 | 按需跳转到4/5     |
| 4    | 单个商品详细信息页面           | 按需跳转到3/5     |
| 5    | 采购项目（订单）提交页面       | 按需跳转到4/5/7   |
| 6    | 配送进度查看页面               | 按需跳转到8       |
| 7    | 配送员联系页面                 | 按需跳转至3/5/6/7 |

* **功能详情**

1. 注册页面

   小区用户首次进入平台，可以申请创建一个新账号。用户自主设定账号名、密码，在平台上通过身份证照片完成实名认证，并提供本人的联系电话、家庭住址，绑定用户微信/支付宝/银行卡等支付信息。

2. 登录页面

   拥有账号的小区用户，可以在打开平台后直接通过账号名以及密码登录。如果已经绑定微信的用户，可以通过微信进行快捷登录。

3. 商品（日用品/药品/其它）陈列区

   小区住户完成账号登录后，可直接进入“商品陈列区”，该页面需要至少支持“搜索商品”以及“搜索店家”两种搜索模式。如果搜索的商品所在的店家距离当前用户位置较远，则该商品信息无法呈现。

   陈列区主页面以单件商品为单位进行陈列，用户点击某种商品之后，即可进入商品详细信息页面完成进一步的购买操作。

4. 单个商品详细信息页面

   该页面主要接收来自后端的商品详细信息，包括名字、价格、重量、存量，具体信息，并予以呈现。另外需要有面向小区住户的购买操作按钮，以及返回陈列区按钮。

5. 采购项目（订单）提交与支付页面

   该页面呈现订单信息，包括商品名称、价格、店家名称、店家联系方式、支付方式。住户可在该页面填写希望商品送达的时间。另外，该页面需要具有可以外联至支付宝/微信等支付平台的接口。

6. 已购商品配送进度查看页面

   用户进入该页面后，首先可以看到所有订单信息，订单以商家为单位分类陈列（在同一商家处选购的商品将被一并配送）。用户选择某一订单信息，即可看到当前商品的位置信息（即配送进度）。在此页面，每个订单会与一个配送员进行捆绑，页面提供配送员姓名以及联系电话。

7. 配送员联系页面

   用户可通过6中的配送员联系按钮触发手机拨打指定电话的功能。

##### 志愿者端

* **功能陈列**

| 序号 | 功能               | 需求关联性      |
| ---- | ------------------ | --------------- |
| 1    | 注册（含实名认证） | 自动跳转至2     |
| 2    | 志愿服务激活页面   | 按需跳转到3     |
| 3    | 登录页面           | 按需跳转至4/5/6 |
| 4    | 服务申请与选择页面 | 按需跳转至5/6   |
| 5    | 订单查看和管理页面 | 按需跳转至4     |
| 6    | 站岗服务页面       | 按需跳转至4     |

* **功能详情**

1. 注册（含实名认证）

   志愿者首次进入平台，可以申请创建一个新账号。志愿者自主设定账号名及密码，在平台上通过身份证照片完成实名认证，并且向平台提供本人联系方式、具体家庭地址。可按需绑定个人手机或微信。

2. 志愿服务激活页面

   志愿者完成注册后可直接进入志愿服务激活页面，也可选择之后登录平台激活。

   - 若志愿者选择配送服务，则系统根据该志愿者所处的家庭住址，并结合当前各小区志愿者缺口数目，为其默认分配最近的服务小区以及对应商家。志愿者对默认分配的小区可申请修改，在申请选择页面会显示当前各小区缺口的志愿者数目，提交申请后后台进行人工审核和调剂，审核通过后该志愿服务才算真正激活。志愿者需要同时填写其意愿每日负责的住户个数、偏好工作时间，同时填写其交通工具。
   - 若志愿者选择站岗服务，则系统根据该志愿者所处的家庭住址以及当前各小区缺口的站岗志愿者数目，为其默认分配合适服务小区，以及默认的站岗时间段。志愿者可对分配小区和站岗时间段提出修改申请，在申请选择页面会显示当前各小区各时间段缺口的志愿者数目，提交申请后后台进行人工审核和调剂，审核通过后该志愿服务才算真正激活。

3. 登录页面

   志愿者凭借账号名及密码即可完成登录，如果已经完成手机/微信绑定，可通过短信/微信进行快捷登录。

4. 服务申请与选择页面

   志愿者进入服务选择页面，提交志愿服务申请，申请信息包括志愿服务的日期（可选择未来1天或多天）。申请需要在志愿服务前一天提交，后台得到该志愿服务的请求，完成志愿任务分配算法。当在志愿服务前一天晚上9点，将分配好的所有任务发布至已提交服务的志愿者端，并通过app发送实时任务分配完成提醒。

5. 订单查看和管理页面

   - 志愿者在得到配送任务分配后，可随时查看该页面的订单信息。信息包括订单买卖双方（小区住户、商家）的具体位置信息，住户商品需求送达时间，商家、住户联系方式，订单商品详情（包括具体名称、件数、总质量）。

   - 志愿者可通过联系商家/住户按钮触发手机拨打指定电话的功能。
   - 若志愿者遇突发情况而无法准时完成配送服务，则需要在该页面提交订单移交申请/延迟配送申请（如果是紧急配送任务，如当天必须送达的药物等紧急用品，则选择移交给平台其余志愿者的模式；如果是非紧急配送任务，则选择延期配送模式）。后台处理志愿者的突发请求，并将信息传送给相关的商家、住户以及备选志愿者。
   - 进入每个订单的管理页面，志愿者可在到达商家取货、到达住户商品存放点这两个阶段点分别完成确认操作，该确认信息会同步传送到对应商家端和小区住户端。

6. 站岗服务页面

   志愿者在获得站岗任务分配后，可随时进入该页面查看任务详情。在指定时间到达指定的站岗点后，志愿者可通过手机定位实现“到岗打卡”（类似于志愿汇app）。

##### 商家端

* **功能陈列**

| 序号 | 功能             | 需求关联性      |
| ---- | ---------------- | --------------- |
| 1    | 注册页面         | 自动跳转到2     |
| 2    | 登录页面         | 按需跳转到3/4/5 |
| 3    | 商品信息上传页面 | 按需跳转到4/5   |
| 4    | 订单接收页面     | 按需跳转到3/5   |
| 5    | 订单信息查看页面 | 按需跳转到3/4   |

* **功能详情**

1. 注册页面

   商家首次进入平台，可申请创建一个新账号，自主设定账户名及密码，并且向平台提供注册店铺必要信息：名称、地址、营业执照、法人身份信息、经营品类说明、联系方式、收款信息。商家同样可以完成手机/微信绑定。

2. 登录页面

   商家凭借账号名及密码即可完成登录，如果已经完成手机/微信绑定，可通过短信/微信进行快捷登录。

3. 商品信息上传页面

   商家在此页面可完成 次日/近期 可出售商品的信息上传。对于每件商品，商家需要提供以下信息：名字、价格、重量、存量、（禁止商家上传大件货品）、具体信息（包括生产日期、保质期、产地、产品组成等）。

4. 订单接收页面

   当住户向商家提交订单后（在配送的前一天），商家需要实时完成接单操作，该操作将被传送到后台，方便后台进行统一的配送志愿者分配及任务发布。完成订单接收后，住户所支付款项会提交至平台监管，该订单确认收货后，商家方可获得款项。

5. 订单信息查看页面

   - 商家在接受订单后可实时进入该页面查看订单状态。此页面将会显示订单的购买者账号信息、家庭住址、联系方式、商品需求送达时间，配送志愿者账号信息、身份信息、联系方式，以及订单商品详情（包括具体名称、件数、总质量）。

   - 商家可在该页面根据实际情况更新出货时间，该时间将通过后台传送给对应小区住户。商家可实时查看配送员的位置信息，以及送达情况。并通过联系按钮触发手机拨打指定电话的功能。

#### 后台（超级管理员）功能

* **功能陈列**

| 序号 |        功能        |   需求关联性    |
| :--: | :----------------: | :-------------: |
|  1   |      身份认证      | 按需跳转至2/3/4 |
|  2   |     添加管理员     |  按需跳转至3/4  |
|  3   |   修改管理员信息   |  按需跳转至2/4  |
|  4   | 查看管理员活动记录 |  按需跳转至2/3  |

* **功能详述**

1. 身份认证
超级管理员的账号创建和密码重置由技术人员直连服务器操作。
   超级管理员以用户名和密码登录网页后台，登录IP受到限制。
   
2. 添加管理员

   超级管理员可以手动输入或批量导入的方式添加管理员账号，并在创建时为其设置初始密码和管理权限。

3. 修改管理员信息

   超级管理员可修改管理员的密码、管理权限，但不得将已创建的管理员记录删除。

4. 查看管理员活动记录

   超级管理员可查看管理员的活动记录，查看方式包括查看某一管理员的记录、查看某一类管理活动的记录、查看所有记录。

#### **后台（管理员）功能**

* **功能陈列**

| 序号 |         功能         |       需求关联性        |
| :--: | :------------------: | :---------------------: |
|  1   |       身份认证       | 按需跳转至2/3/4/5/6/7/8 |
|  2   |     个人信息修改     |                         |
|  3   |   管理志愿服务项目   |                         |
|  4   | 查看居民用户分布情况 |                         |
|  5   |   查看居民用户列表   |                         |
|  6   |  查看志愿者用户列表  |                         |
|  7   |   查看商家用户列表   |                         |
|  8   |     商家信息审核     |      随时跳转进入       |
|  9   |       退出登录       |         跳转至1         |
|  10  |    管理员活动监测    |                         |

* **功能详述**

1. 身份认证

   管理员账号的持有者为平台运营方的客服。
   管理员以用户名和密码登录后台，登录IP不受限制，但IP地址异常时需经过手机验证码二次验证后方可进入系统。
   身份认证成功后，即进入值班状态。

2. 个人信息修改

   管理员初次进入时应修改登录密码，并设置手机号码和电子邮箱地址。
   管理员在使用过程中可随时修改登录密码、手机电话和电子邮箱地址。
   修改登录密码时，应通过短信验证码或电子邮件验证码予以确认。

3. 管理志愿服务项目

   管理员在接到社区、行政机关、事业单位等单位的需求后，创建志愿服务项目，设置志愿服务信息，包括项目介绍、涉及的地理区域、志愿者的要求（包括性别、年龄、居住地、健康码）、商家的要求（包括经营范围、地理位置）。
   管理员可对志愿服务项目进行修改。

4. 查看居民用户分布情况

   管理员可依地理区域查看居民用户列表，并可批量导出。
   列表所含信息包括居民数量和分布图、年龄比例图、健康码分布图，不包括具体某一居民的信息。
   该信息属于较敏感信息。

5. 查看居民用户列表

   管理员可依地理区域、年龄范围、健康码类型查看居民列表，并可批量导出。在列表页面中可选择跳转至某个居民的具体信息页面。
   
   管理员可在居民列表中选择查看某一居民的具体信息，包括居民基本信息和在平台上的活动记录。
   
7. 查看志愿者用户列表

   管理员可依地理区域、服务类型、服务项目查看志愿者列表，并可批量导出。列表所含信息包括志愿者姓名、联系方式、服务类型、服务项目。在列表页面中可选择跳转至某个志愿者的具体信息页面。
   
   管理员可在志愿者列表中选择查看某一志愿者的具体信息，包括志愿者的服务信息和服务活动记录。管理员可在此页面跳转至志愿者的居民信息页面。
   
9. 查看商家用户列表

   管理员可依地理区域或经营范围查看商家列表，并可批量导出。列表所含信息包括主体名称、经营范围、地理位置、联系方式。在列表页面中可选择跳转至某个商家的具体信息页面。
   
   管理员可在商家列表中选择查看某一商家的具体信息，包括商家上传的基本信息和在平台上的活动记录。
   
8. 商家信息

   审核管理员接到商家注册后，对商家所上传的信息进行审核，设置审核通过或不通过

9. 退出登录

   管理员暂停工作时，应手动退出登录。

10. 管理员活动监测

    有此权限的管理员可以查看其他管理员的登录状态和活动记录。



### 性能需求

1. 客户端
   1. 界面设计应简洁直观，布局合理，清晰地呈现信息，突出重点内容。
   2. 操作方便，用户容易上手。
   3. 系统具有良好的反应速度，给用户良好的使用体验。
   4. 满足调配任务的高实时性，需要尽可能快速的进行志愿者调配。 
   5. 上百个个用户同时在线时:客户端响应用户动作时间小于2秒
2.  服务器
   1. 数据库表设计良好，方便维护，能实现快速查询。历史调配方便快速可查，快速问责。
   2. 对其他模块的接口友好易使用。
   3. 系统具有良好的反应速度，能够快速处理请求，支持其他模块的工作。 
   4. 数百个查询同步的时候:响应时间小于2秒。
3. 具体的操作
   1.  xxx在多少时间内完成（需等着第二步完成。)
   2. xxx在多少时间内完成（需等着第二步完成。)



### 具体任务

1. 与基础信息模块对接的接口设计。账号和用户信息都需要从基础信息模块中拉取，因此需要根据基础信息模块提供的接口上传、下载数据，更新后台。要确保接口和数据格式与基础信息模块一致。
2. 不同类型用户使用本模块时要区分显示。本模块区分不同类型的用户，对于不同类型的用户的显示与功能是不同的。模块需要确保可以准确识别不同的用户类型，并设计不同的功能入口对应不同类型的用户显示。
3. 后端对配送订单的分配的设计。要合理设计不同的订单的优先级，并依照优先级先后分配订单。同时还要根据配送订单的其他数据（如总重量），确定每位志愿者一趟需要完成的订单数目。
4. 订单信息的保存与更新。在住户、志愿者、商家的账户中都应实时保存已完成、正在配送与等待完成的订单信息到后端数据库中，并且在订单下单、订单配送、配送完成、买家收货等关键节点实时更新订单信息。
5. 商家商品信息上传功能。需要制定好商品信息的表单，将必需的和重要的信息收集并保存好，并在住户下单时实时更新数据。商家要可以很方便地上传商品数据，乃至可以批量上传商品数据。
6. 可视化前端模块设计。对于商家账户与个人账户，要有两套不同的UI界面，且前端需要能够很好地引导住户购买商品、志愿者参与志愿服务、商家完成交易操作。可视化的前端需要简洁易懂，简约大方。
7. 可视化移动端移植。在实现web前后端的模块设计后，根据移动端的特点，将本模块web端的设计进行调整，并最终移植到移动端，与其他模块一起构成一个完整的应用。